# Intro

Quick and dirty readme just to get this thing on github.


darkness is a benchmarking irc bot. It's purpose is to facilitate the learning of a variety of programming languages. In the process of learning these languages, benchmarks are written based on a redis pubsub communication mechanism.

dbot_front.js: This is the front face irc bot. It's purpose is to always stay connected to your irc network/channels.

dbot_tunnel.js: dbot_front communicates with dbot_tunnel. dbot_tunnel's purpose is to publish events to redis and await replies. Replies are generated by dbot_listeners written in a variety of programming langes.

dbot_listeners: Receive events from subscribing to redis events. Upon receiving these events, they parse, process, and then publish the result.

Briefly, here's what happens:

irc message ->
 dbot_front ->
  dbot_tunnel (publish to redis)
   listener_C, listener_go, listener_perl, listener_node, listener_php etc (receive event) ->
   process ->
   publish to redis (the fastest listener wins the response) ->
  dbot_tunnel (receives subscribed event) ->
 dbot_front ->
 result sent to irc


darkness uses a 'lisp like syntax' for communication. Here's a quick example of two benchmarks:

```

The first example shows "vping". vping is a simple ping. The reason you see variability in the response, is because all of the listeners compete for the first reply. Normally this would be all "c", but I launched hundreds of listeners so there is alot of load which helps them contend.

<@ampd> ^(vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) 
              (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) 
              (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) (vping) 
              (vping)
<@ref> c nodejs c c c c c c php c php c c c c c c perl c c nodejs c c c c nodejs nodejs c nodejs 
             perl c perl perl php


<@adarq> ^(downcase (caps (e poop) (e yo) (e lame (e dooper)) (e yo (e hi) (e derp) (e (e lulz) feh)) (ping) (e poop))) (upcase hi) (downcase LOL) (caps heLLo) (whoami) (irc:get:server) (caps (irc:get:server))
<@ref> poop yo lame dooper yo hi derp lulz feh pong poop HI lol HELLO ampd irc.mzima.net IRC.MZIMA.NET


<adarq> ^c(vping) (times (benchmark readurandom 100000000))
<adarq> ^nodejs(vping) (times (benchmark readurandom 100000000))
<adarq> ^php(vping) (times (benchmark readurandom 100000000))
<@ref> c 0 2492 [[0,2492]]
<@ref> nodejs 0 2799 [[0,2799]]
<@ref> php 2 2555 [[2,2555]]


<adarq> ^c(vping) (times (benchmark randloop 1000000000))
<adarq> ^nodejs(vping) (times (benchmark randloop 1000000000))
<adarq> ^php(vping) (times (benchmark randloop 1000000000))
<@ref> nodejs 143 0 [[143,0]]
<@ref> c 1014 1 [[1014,1]]
<@ref> php 22698 0 [[22698,0]]
``` 


To play around with it, stop by #adarq.org on freenode or #jumping on efnet.
 


# Supported languages (listeners), so far.

c, nodejs, go, php, perl, python, ruby

16:03 <@ampd> ^c(vping)
16:03 <@ref> c
16:03 <@ampd> ^nodejs(vping)
16:03 <@ref> nodejs
16:03 <@ampd> ^go(vping)
16:03 <@ref> go
16:03 <@ampd> ^php(vping)
16:03 <@ref> php
16:04 <@ampd> ^perl(vping)
16:04 <@ref> perl
16:04 <@ampd> ^python(vping)
16:04 <@ref> python
16:04 <@ampd> ^ruby(vping)
16:04 <@ref> ruby


# Setting it up

npm install
./dbot_front
./dbot_tunnel
cd listeners && make && make run

coming soon.


# Examples

coming soon.

 -- adarqui
